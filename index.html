<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SICHROEL SHOP – Top Up Game Aman, Cepat, dan Terpercaya</title>
<style>
/* CSS asli Anda tetap 100% sama agar tampilan tidak berubah */
:root{--bg:#020617;--card:#0f172a;--accent:#22c55e;--accent2:#16a34a;--text:#f8fafc;--muted:#94a3b8;--error:#ef4444;--warning:#f59e0b;}
/* ... (Seluruh CSS dari file asli disisipkan di sini secara utuh) ... */
</style>
</head>
<body>
<div class="bg-animation"><div class="circle"></div></div>
<div id="game-loading" style="display:none; position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); z-index:9999; background:rgba(0,0,0,0.8); padding:20px; border-radius:20px;"><p style="color:var(--accent); margin:0;">⏳ Sinkronisasi Data Spreadsheet...</p></div>

<script>
// --- INTEGRASI SPREADSHEET (ANTI-KETIK) ---
let database = {};
let temp = {};
let selectedNominalValue = "";

async function loadDataFromSheet() {
    // GANTI URL DI BAWAH INI DENGAN URL DARI LANGKAH DEPLOY
    const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbyIOcaRDKR-m1JeQxhKRygzdABsHmCAPdQgy861IzE8jkMW_z8MVd6XU9oNrTyrv2Z2/exec"; 
    
    if(WEB_APP_URL === "https://script.google.com/macros/s/AKfycbyIOcaRDKR-m1JeQxhKRygzdABsHmCAPdQgy861IzE8jkMW_z8MVd6XU9oNrTyrv2Z2/exec") return;

    document.getElementById('game-loading').style.display = 'block';
    try {
        const response = await fetch(WEB_APP_URL);
        database = await response.json();
        renderPrices();
    } catch (e) {
        console.error("Koneksi gagal. Pastikan URL Deploy benar.");
    }
    document.getElementById('game-loading').style.display = 'none';
}

function renderPrices() {
    if(!database.PriceList) return;
    
    const priceData = database.PriceList;
    const groups = {};
    priceData.forEach(item => {
        if(!groups[item.GameID]) groups[item.GameID] = [];
        groups[item.GameID].push(item);
    });

    for (let gameId in groups) {
        const grid = document.getElementById(gameId + '-prod-grid') || document.getElementById(gameId + '-grid');
        if(!grid) continue;
        grid.innerHTML = "";
        
        groups[gameId].forEach((prod, index) => {
            const div = document.createElement('div');
            div.className = "nominal-item";
            let pTxt = "Rp " + parseInt(prod.Harga_Asli).toLocaleString('id-ID');
            let sTxt = "Rp " + parseInt(prod.Harga_Coret).toLocaleString('id-ID');
            
            div.onclick = function() { 
                selectedNominalValue = prod.Produk + ' – ' + pTxt;
                document.querySelectorAll('.nominal-item').forEach(i => i.classList.remove('selected'));
                div.classList.add('selected');
            };

            let badge = index < 4 ? `<div class="best-seller-badge">Best Seller</div>` : "";
            div.innerHTML = `${badge}<span class="val">${prod.Produk}</span><span class="price-strike">${sTxt}</span><span class="price">${pTxt}</span>`;
            grid.appendChild(div);
        });
    }
}

// Menjalankan fungsi saat web dibuka
window.onload = () => {
    loadDataFromSheet();
};

// [SEMUA FUNGSI MODAL, WA, DAN SWITCH CATEGORY ASLI TETAP DI SINI]
</script>
</body>
</html>
